<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>焖肉面 - puzzle hunt工具集</title>
		<style>.capsule{background-color:#9eddff;width:100%;height:20px;border-radius:10px;text-align:center;margin:2px;cursor:pointer;margin:5px}.flag-shape{margin:10px;width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:30px solid #000}.transparent{opacity:.1}.capsule:hover{font-weight:700;-webkit-transform:translateX(-3px);transform:translateX(-3px);transition:.5s ease}.content-area{height:fit-content}.container{width:50%}.content-area textarea{background-color:#f8f8f8;font-size:16px;margin:10px}.help-content{font-size:12px;color:#adabab;background-color:unset}#word-search-content{width:40%;height:400px}.word-content{width:80%;display:flex;flex-wrap:wrap;word-break:break-word}#word-find-similarity-hint{margin-top:30px}.word-content>div{margin:5px}.word-content>b{flex-basis:100%;font-size:20px}#footer,h1,h3{margin:40px;display:flex;justify-content:space-around}.face-container{width:fit-content;display:flex;width:100%;justify-content:space-around}#expand{width:fit-content;margin:10px}.face{height:200px;width:200px}.cube-block{background-color:gray;vertical-align:bottom;border:1px solid}#rubik-cube{border:5px solid}#piano{display:flex}.pianoWhiteKey{width:25px;height:120px;border:1px solid;margin-right:-1px;display:flex;flex-direction:column;justify-content:flex-end}.pianoBlackArea{position:absolute;display:flex;margin-left:15px}.pianoBlackKey{width:20px;height:80px;display:flex;flex-direction:column;justify-content:flex-end;border:1px solid;background-color:#000;color:#fff}.blind-dot{border-radius:50%;width:30px;height:30px;border:1px solid;margin:10px 2px 2px 10px}#blind-letter,#flag-letter{font-size:20px;margin-left:40px;margin-top:20px}.map-unit{width:25px}.map-unit input{width:22px;background-color:#80808036}.map-unit div{margin-left:4px}.sudoku-grid{width:30px;height:30px;border:1px solid;margin-right:-1px;margin-bottom:-1px}#sudokuContainer{display:flex;flex-wrap:wrap;align-content:flex-start}.sudoku-grid-content{height:28px;text-align:center}.sudoku-index{z-index:-1;font-size:12;opacity:.2;position:absolute}</style>
		<link rel="stylesheet" href="./static/nonogram.css">
		<link rel="stylesheet" href="./static/bootstrap.min.css">
	</head>
	<body>
		<h1>焖肉面- puzzle hunt工具集</h1>
		<h3>正在加载所需要的资源，暂时功能不可用,请稍等片刻，如果实在太慢，可下载本页面到电脑本地使用</h3>
		<div class="container">
			<div id="word-container">
				<div id="word-capsule" class="capsule" data-expend="true">puzzle 字典(正则匹配、anagram、通配符、编辑距离)</div>
				<div id="word-main" class="content-area">
					<textarea id="one-word-content" class="form-control" placeholder="请输入要查询的单词"></textarea>
					<div id="method-select">
						<select onchange="changeMethod()" id="find-method">
							<option value="findByWildcard">通配符</option>
							<option value="findByRegularExpression">正则</option>
							<option value="contains">包含</option>
							<option value="findSimilarity">寻找相似单词(编辑距离)</option>
							<option value="findByCode">DIY写程序查找</option>
						</select>
					</div>
					<pre id="help-content" class="help-content"></pre>
					<button id="find-words">solve</button>
					<div>以下为可能结果:</div>
					<div id="word-list-count"></div>
					<div id="words-list"></div>
				</div>
			</div>
			<div id="substitution-container">
				<div id="substitution-capsule" class="capsule" data-expend="true">单表替换</div>
				<div id="substitution-main" class="content-area" style="display:none">
					<form role="form">
						<div class="form-group">
							<div>单表暴力</div>
							<textarea id="content" class="form-control" rows="20" placeholder="请输入单表密文"></textarea>
							<div>
								<button id="substitution-solver-btn" type="button">单表暴力</button>
							</div>
						</div>
					</form>
					<div>以下为可能结果:</div>
					<div id="substitution-answer"></div>
				</div>
			</div>
			<div id="nonogram-container">
				<div id="nonogram-capsule" class="capsule" data-expend="true">nonogram</div>
				<div id="nonogram-main" class="content-area" style="display:none">
					<form role="form">
						<div class="form-group">
							<label for="name">行</label>
							<input id="row" value="5" onchange="ModifiedCb()">
							<label for="name">列</label>
							<input id="column" value="5" onchange="ModifiedCb()">
						</div>
					</form>
					<div id="playground">
						<div id="upper-bar"></div>
						<div id="bottom">
							<div id="left-bar"></div>
							<div id="board"></div>
						</div>
					</div>
					<button onclick="solve()">solve</button>
				</div>
			</div>
			<div id="word-search-container">
				<div id="word-search-capsule" class="capsule" data-expend="true">Word Search</div>
				<div id="word-search-main" class="content-area" style="display:none">
					<div class="help-content">Word Search是一个找词游戏，给出一个n*m的字母方阵，要求在横竖斜的方向上找到英语单词</div>
					<div class="help-content">在下面文本框内填入要word search的字母方阵，例如</div>
					<div class="help-content">abc</div>
					<div class="help-content">ddf</div>
					<div class="help-content">ghi</div>
					<div>
						<textarea id="word-search-content" class="form-control" placeholder="请输出字母方阵,用空行隔开"></textarea>
						<button onclick="wordSearch()">Solver</button>
					</div>
					<div id="word-search-ansers" style="display:flex">
						<div id="word-search-ansers-list"></div>
						<div id="word-search-ansers-position" style="margin-left:40px"></div>
					</div>
				</div>
			</div>
			<div id="rubik-cube-container">
				<div id="rubik-cube-capsule" class="capsule" data-expend="true">魔方</div>
				<div id="rubik-cube-main" class="content-area" style="display:none">
					<div class="help-content">请拖动魔方观看所有面:</div>
					<canvas id="rubik-cube" height="300px" width="300px"></canvas>
					<button onclick="resetRubicCube()">重置魔方</button>
					<div>
						<div>顺时针</div>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" F"),window.rubicCube.front(1)'>前面(F)</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" U"),window.rubicCube.up(1)'>顶面(U)</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" B"),window.rubicCube.back(-1)'>背面(B)</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" D"),window.rubicCube.bottom(-1)'>底面(D)</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" L"),window.rubicCube.left(1)'>左边(L)</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" R"),window.rubicCube.right(-1)'>右面(R)</button>
					</div>
					<div>
						<div>逆时针</div>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" F&#39;"),window.rubicCube.front(-1)'>前面(F')</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" U&#39;"),window.rubicCube.up(-1)'>顶面(U')</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" B&#39;"),window.rubicCube.back(1)'>背面(B')</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" D&#39;"),window.rubicCube.bottom(1)'>底面(D')</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" L&#39;"),window.rubicCube.left(-1)'>左边(L')</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" R&#39;"),window.rubicCube.right(1)'>右面(R')</button>
					</div>
					<br>
					<b id="rubic-formular">公式 :</b>
					<br>
					<div class="help-content">在下面魔方展开图中可用鼠标绘制任意图案颜色(注:画笔颜色既可以是颜色英文，例如red, blue, orange, 也可是#开头的RGB,例如#FFABCD)</div>
					<label>画笔颜色</label><input id="penColor" value="black">
					<label>画笔粗细</label><input id="penWidth" value="3">
					<div id="expand"></div>
				</div>
			</div>
			<div id="music-container">
				<div id="music-capsule" class="capsule" data-expend="true">音乐</div>
				<div id="music-main" class="content-area" style="display:none">
					<div id="piano">
						<div onclick="playSound(130.81,2e3)" class="pianoWhiteKey">C3</div>
						<div onclick="playSound(146.83,2e3)" class="pianoWhiteKey">D3</div>
						<div onclick="playSound(164.81,2e3)" class="pianoWhiteKey">E3</div>
						<div onclick="playSound(174.61,2e3)" class="pianoWhiteKey">F3</div>
						<div onclick="playSound(196,2e3)" class="pianoWhiteKey">G3</div>
						<div onclick="playSound(220,2e3)" class="pianoWhiteKey">A3</div>
						<div onclick="playSound(246.94,2e3)" class="pianoWhiteKey">B3</div>
						<div onclick="playSound(261.63,2e3)" class="pianoWhiteKey">C4</div>
						<div onclick="playSound(293.66,2e3)" class="pianoWhiteKey">D4</div>
						<div onclick="playSound(329.63,2e3)" class="pianoWhiteKey">E4</div>
						<div onclick="playSound(349.23,2e3)" class="pianoWhiteKey">F4</div>
						<div onclick="playSound(392,2e3)" class="pianoWhiteKey">G4</div>
						<div onclick="playSound(440,2e3)" class="pianoWhiteKey">A4</div>
						<div onclick="playSound(493.88,2e3)" class="pianoWhiteKey">B4</div>
						<div class="pianoBlackArea">
							<div class="pianoBlackKey">C#</div>
							<div class="pianoBlackKey">D#</div>
						</div>
					</div>
				</div>
			</div>
			<div id="blind-container">
				<div id="blind-capsule" class="capsule" data-expend="true">盲文&旗语</div>
				<div id="blind-main" class="content-area" style="display:none">
					<div>盲文:</div>
					<div id="demo-blind-letter" style="margin-right:5px">
						<div style="display:flex">
							<div>
								<div class="blind-dot" data-index="0"></div>
								<div class="blind-dot" data-index="1"></div>
								<div class="blind-dot" data-index="2"></div>
							</div>
							<div>
								<div class="blind-dot" data-index="3"></div>
								<div class="blind-dot" data-index="4"></div>
								<div class="blind-dot" data-index="5"></div>
							</div>
						</div>
						<div id="blind-letter"></div>
					</div>
					<button onclick="confirmBlind()" style="margin:20px">确认</button>
					<div id="history-blind-area" style="display:flex"></div>
					<div>旗语:</div>
					<div id="demo-flag">
						<div style="display:flex">
							<div class="flag-shape" style="transform:rotate(-45deg)" data-index="0"></div>
							<div class="flag-shape" data-index="1"></div>
							<div class="flag-shape transparent" style="transform:rotate(45deg)" data-index="2"></div>
						</div>
						<div style="display:flex">
							<div class="flag-shape transparent" style="transform:rotate(-90deg)" data-index="3"></div>
							<div style="width:40px;height:50px"></div>
							<div class="flag-shape transparent" style="transform:rotate(90deg)" data-index="4"></div>
						</div>
						<div style="display:flex">
							<div class="flag-shape transparent" style="transform:rotate(-135deg)" data-index="5"></div>
							<div class="flag-shape transparent" style="transform:rotate(180deg)" data-index="6"></div>
							<div class="flag-shape transparent" style="transform:rotate(135deg)" data-index="7"></div>
						</div>
						<div id="flag-letter"></div>
					</div>
					<button onclick="confirmFlag()" style="margin:20px">确认</button>
					<div id="history-flag-area" style="display:flex"></div>
				</div>
			</div>
			<div id="cipher-container">
				<div id="cipher-capsule" class="capsule" data-expend="true">古典密码</div>
				<div id="cipher-main" class="content-area" style="display:none">
					<div id="cipher-tools">
						<button id="caeser-brute-force" style="margin:20px">暴力凯撒</button>
						<button id="QWE" style="margin:20px">QWE</button>
						<div id="general-substitute-cipher">
							<select onchange="changeSubstitutionMethod()" id="substitution-cipher-method">
								<option value="QWECipher">QWE加密</option>
								<option value="QWECipher">QWE解密</option>
								<option value="QWECipher">Atbash</option>
							</select>
							<div id="substitute-table" style="display:flex"></div>
							<button onclick="solveGeneralSubstitution()">解码</button>
						</div>
						<input id="autoDecode" type="checkbox" onclick="autoCheckClick()"> 自动暴力
					</div>
					<textarea id="cipher-code-textarea" class="form-control" rows="20" placeholder="请输入密文" oninput="onTypePlainCode()"></textarea>
					<div id="plain-code-area"></div>
				</div>
			</div>
			<div id="drop-quotes-container">
				<div id="drop-quotes-capsule" class="capsule" data-expend="true">Drop Quotes</div>
				<div id="drop-quotes-main" class="content-area" style="display:none">
					<form role="form">
						<div class="form-group">
							<label for="name">r</label>
							<input id="drop-quotes-row" value="2" onchange="dropQuoteModifiedCb()">
							<label for="name">c</label>
							<input id="drop-quotes-column" value="7" onchange="dropQuoteModifiedCb()">
							<input id="blackbox-seprete" type="checkbox" checked="checked"> 黑格子用来做单词分割
						</div>
					</form>
					<div id="drop-quotes-playground">
						<div id="drop-quotes-upper-bar"></div>
						<div id="drop-quotes-bottom">
							<div id="dq-board"></div>
						</div>
					</div>
					<div id="drop-quote-answer"></div>
					<button onclick="dropQuotesSolve()">solve</button>
				</div>
			</div>
			<div id="sudoku-container">
				<div id="sudoku-capsule" class="capsule" data-expend="true">数独等经典谜题</div>
				<div id="sudoku-main" class="content-area" style="display:none">
					<div>
						<select id="solverMode" onchange="changeSolverMode()">
							<option value="sudoku">经典数独模式</option>
							<option value="mine">经典扫雷</option>
							<option value="magicSquare">经典幻方</option>
						</select>
					</div>
					<span>行: </span> <span id="sudoku-row" style="border:1px solid" contenteditable="true">9</span>
					<span>列: </span> <span id="sudoku-col" style="border:1px solid" contenteditable="true">9</span>
					<a href="https://github.com/philippica/cipher_machine/wiki/%E7%84%96%E8%82%89%E9%9D%A2%E8%84%9A%E6%9C%AC%E6%96%87%E6%A1%A3">脚本规则说明</a>
					<div style="display:flex">
						<textarea id="rules" cols="50" rows="30"></textarea>
						<div style="margin:20px">
							<div>
								<div style="font-size:13px">下面格子中的内容将被替换为规则:</div>
								<textarea id="replaceStr" cols="50"></textarea>
							</div>
							<div id="sudokuContainer"></div>
							<pre id="sudokuAnswer"></pre>
						</div>
					</div>
					<button id="solveSudoku">solve</button>
				</div>
			</div>
		</div>
		<div id="footer"> power by -- philippica (Contact me: philippicapyj@gmail.com)</div>

		<script src="./static/jquery.min.js"></script>
		<script src="index-ea47b0b8.js"></script>
		<script>let rubicCubeMaterias;$("h3").remove(),$(".capsule").click(e=>{const t=e.target,o=$(t.parentElement.lastElementChild);o.is(":visible")?o.hide("fast","linear"):o.show("fast","linear")}),$("#rubik-cube-capsule").click(e=>{if(!window.rubicCube){const e=initExpand();rubicCubeMaterias=e;const t=document.getElementById("rubik-cube"),o=t.getContext("2d");window.rubicCube=new Solver.RubikCubeStage(o,t.width,t.height,rubicCubeMaterias)}}),$("#substitution-solver-btn").click((function(){var e=$("#content").val();console.info(e),plaintext=(new Solver.SubstitutionSolver).substituteSolver(e),$("#substitution-answer").empty(),plaintext.length;for(let e=0;e<Math.min(plaintext.length,100);e++)$("#substitution-answer").append(`<div><b>${plaintext[e]}</b></div>`)}));let columnArea=[],rowArea=[];const setTile=(e,t,o)=>{console.info(e,t,o),2===o&&$(`#cell-${e}-${t}`).css("background-color","white"),1===o&&$(`#cell-${e}-${t}`).css("background-color","black")},solve=()=>{let e=0;for(let t of columnArea)for(let o of t)e+=o;let t=0;for(let e of rowArea)for(let o of e)t+=o;t==e?plaintext=(new Solver.Nonogram).nonogramSolver(columnArea,rowArea,setTile):alert(`左半部分的和为${t}, 右半部分的和为${e}， 两者不相等，检查一下`)},changeInput=e=>{const t=parseInt(e.target.innerText);if(e.data&&t>0){const o=e.target.dataset;console.info(o);const a=parseInt(o.idx),r=parseInt(o.col),l=parseInt(o.row);"col"===o.type&&a===columnArea[r].length?(columnArea[r].push(t),console.info(columnArea),$("#col-"+o.col).prepend(`<div id="col-cell-${o.col}-${a+1}" data-type="col" data-col=${o.col} data-idx=${a+1} contenteditable="true" oninput="changeInput(event)" class="col-input">0</div>`)):"row"===o.type&&a===rowArea[l].length?(rowArea[l].push(t),$("#row-"+o.row).prepend(`<div id="row-cell-${o.row}-${a+1}" data-type="row" data-row=${o.row} data-idx=${a+1} contenteditable="true" oninput="changeInput(event)" class="row-input">0</div>`),console.info(rowArea)):"row"===o.type?rowArea[l][a]=t:columnArea[r][a]=t}else{const t=e.target.dataset,o=parseInt(t.idx),a=parseInt(t.col),r=parseInt(t.row);if("row"===t.type)for(;rowArea[r].length>o;)rowArea[r].pop(),$("#row-"+t.row).children().eq(0).remove();else for(;columnArea[a].length>o;)columnArea[a].pop(),$("#col-"+t.col).children().eq(0).remove()}},ModifiedCb=()=>{let e=parseInt($("#column").val()),t=parseInt($("#row").val());columnArea=[],rowArea=[];for(let t=0;t<e;t++)columnArea.push([]);for(let e=0;e<t;e++)rowArea.push([]);$("#upper-bar").empty(),$("#left-bar").empty(),$("#board").empty();for(let t=0;t<e;t++)$("#upper-bar").append(`<div id="col-${t}" class="col-container"></div>`),$("#col-"+t).append(`<div id="col-cell-${t}-0" data-type="col" data-col=${t} data-idx=0 contenteditable="true" oninput="changeInput(event)" class="col-input">0</div>`);for(let o=0;o<t;o++){$("#left-bar").append(`<div id="row-${o}" class="row-container"></div>`),$("#row-"+o).append(`<div id="row-cell-${o}-0" contenteditable="true" data-type="row" data-row=${o} data-idx=0 oninput="changeInput(event)" class="row-input">0</div>`),$("#board").append(`<div id="row-${o}" class="row-board"></div>`);for(let t=0;t<e;t++)$("#board #row-"+o).append(`<div id="cell-${o}-${t}" class="cell"></div>`)}};ModifiedCb();const solver=new Solver.OneWord,oneWordHelpContent={findByWildcard:"当前是通配符模式 - 你可以使用#表示一个字母或者*表示多个字母 例如 bo##ke*r 可以匹配到bookkeeper",findByRegularExpression:"当前是正则表达式模式 - 如果你熟悉正则表达式，那它将会是一个非常强大的工具 例如^[abcd][ef].*[aeiou]$ 能够搜到第一个字母为abcd中一个，第二个字母为ef中一个，并且以元音结尾的所有单词",contains:"当前是包含模式 - 能够搜出所有至少包含这些字母的单词，例如abbcc会找到所有至少包含一个a两个b和两个c的单词",findSimilarity:"当前是相似度模式-给出单词找到与它相想的单词，两个词相似度即编辑距离，如果能通过一次添加一个字母，替换一个字母或删除一个字母能从一个单词变成另一个单词，那它们的相似度为1",findByCode:"最灵活的找词方式，通过自己编写js代码，实现一个接受一个字符串作为参数的check函数来寻找单词\n函数同时会传入一个tool的参数，包含很多有用函数，当前包括:\n\tisWord(str: string) :bool : 判断传入字符串是否为英语单词\n\tanagram(str: string, letters: string) :bool : 判断传入字符串是否为letters参数中的字符排列组成"};let method="findByWildcard";$("#help-content").text(oneWordHelpContent[method]);const changeMethod=()=>{const e=$("#find-method").val();method=e,$("#word-find-similarity-hint").remove(),$("#similarityRegex").remove(),$("#similarityDegree").remove(),$("#one-word-content").height(60),"findSimilarity"===method?($("#method-select").append("<input id='similarityDegree' placeholder='相似度' value='1'/>"),$("#method-select").append("<div id='word-find-similarity-hint'>在结果中用正则查找:</div><input id='similarityRegex' placeholder='正则表达式(不填则输出所有结果)' />")):"contains"===method?$("#method-select").append("<div id='word-find-similarity-hint'>在结果中用正则查找:</div><input id='similarityRegex' placeholder='正则表达式(不填则输出所有结果)' />"):"findByCode"===method&&($("#one-word-content").val('function check(str, tools) {\n\tif(str[0]!=str[str.length-1])return null; // 如果首字母和尾字母不相等，不选这个单词\n\tif(str.length > 7 || str.length < 5)return null; // 如果单词长度大于7或者小于2，不选这个单词\n\tif(/^a.*b$/.test(str))return null;// 如果满足正则^a.*b$ 不选这个单词\n\tif(tools.anagram(str.substr(2,3), "guo") === false)return null; // 如果从第3个字符起往后3个字母不是由abc组成的，不选这个单词\n\tif(tools.isWord(str.substr(2,5)) === true){ // 如果单词第3个字符（因为下标从0开始)往后5个字母是一个英语单词\n\t\treturn str + " " + str.substr(2,5); //输出该词，并把第三个到第5个字母的字串放后面\n\t}\n}'),$("#one-word-content").height(400)),$("#help-content").text(oneWordHelpContent[method])};$("#find-words").click((async function(){let content=$("#one-word-content").val(),answer;if($("#words-list").empty(),"contains"!==method)for(let e=20;e>=1;e--)$("#words-list").append(`<div id="len-${e}" style="display: none;" class="word-content"><b style="display: block">长度为${e}:</b></div>`);else for(let e=1;e<=20;e++)$("#words-list").append(`<div id="len-${e}" style="display: none;" class="word-content"><b style="display: block">长度为${e}:</b></div>`);let count=0;const findWord=async(e,t)=>{const o=$("#words-list #len-"+e);var a;o.is(":visible")||o.show("fast","linear"),o.append(`<div>${t}</div>`),count++,$("#word-list-count").html(`共${count}个`),count%1e3==0&&await(a=1,new Promise(e=>setTimeout(e,a)))},solverFunc=(new Solver.OneWord)[method].bind(solver);if("findSimilarity"===method){const regex=$("#similarityRegex").val();let regularExpression;regex&&""!==regex&&(regularExpression=eval(`/${regex}/`)),findSimilarity=async(e,t)=>{regularExpression&&!regularExpression.test(t)||await findWord(e,t)};const similarityDegree=parseInt($("#similarityDegree").val());answer=await solverFunc(content,similarityDegree,findSimilarity)}else if("contains"===method){const regex=$("#similarityRegex").val();let regularExpression;regex&&""!==regex&&(regularExpression=eval(`/${regex}/`)),findSimilarity=async(e,t)=>{regularExpression&&!regularExpression.test(t)||await findWord(e,t)},answer=await solverFunc(content,findSimilarity)}else answer=await solverFunc(content,findWord)})),wordSearch=()=>{var e=$("#word-search-content").val();console.info(e);const t=(new Solver.WordSearch).buildMatrix(e),o=(new Solver.WordSearch).wordSearch(t);o.sort((e,t)=>t.word.length-e.word.length);for(let e of o){let t="",o="";1===e.dy?t="右":-1===e.dy&&(t="左"),1===e.dx?o="下":-1===e.dx&&(o="上"),$("#word-search-ansers-list").append(`<div>${e.word}</div>`),$("#word-search-ansers-position").append(`<div>出现在第${e.x+1}行，第${e.y+1}列，向${t}${o}方向</div>`)}},initExpand=()=>{const e=[];for(let e=0;e<4;e++)$("#expand").append(`<div id="expand-${e}" class="face-container"></div>`);$("#expand-0").append('<div id="face-0" class="face"></div>'),$("#expand-1").append('<div id="face-1" class="face"></div>'),$("#expand-1").append('<div id="face-2" class="face"></div>'),$("#expand-1").append('<div id="face-3" class="face"></div>'),$("#expand-2").append('<div id="face-4" class="face"></div>'),$("#expand-3").append('<div id="face-5" class="face"></div>');const t=Math.floor($("#face-1").width()/3-4),o=Math.floor($("#face-1").height()/3-4),a=["white","green","red","blue","yellow","orange"];for(let r=0;r<6;r++)for(let l=0;l<9;l++){$("#face-"+r).append(`<canvas id="block-${9*r+l}" width="${t}px" height="${o}px" class="cube-block"></canvas>`);let n=document.getElementById("block-"+(9*r+l)),i=n.getContext("2d");i.fillStyle=a[r],i.fillRect(0,0,t,o);const d=9*r+l;i.fillStyle="black",i.font="20px Georgia",i.fillText(d.toString(),20,20),e.push(n)}return e},resetRubicCube=()=>{$("#rubic-formular").html("公式: ");const e=document.getElementById("rubik-cube"),t=e.getContext("2d");window.rubicCube=new Solver.RubikCubeStage(t,e.width,e.height,rubicCubeMaterias)};const playSound=(e,t)=>{const o=new(window.AudioContext||window.webkitAudioContext),a=o.createOscillator();a.type="sine",a.frequency.setValueAtTime(e,o.currentTime),a.connect(o.destination),a.start(),setTimeout(()=>{a.stop()},t)},currentBlindState=[0,0,0,0,0,0],braille=[];braille[1]="a",braille[3]="b",braille[9]="c",braille[25]="d",braille[17]="e",braille[11]="f",braille[27]="g",braille[19]="h",braille[10]="i",braille[26]="j",braille[5]="k",braille[7]="l",braille[13]="m",braille[29]="n",braille[21]="o",braille[15]="p",braille[31]="q",braille[23]="r",braille[14]="s",braille[30]="t",braille[37]="u",braille[39]="v",braille[58]="w",braille[45]="x",braille[61]="y",braille[53]="z",$(".blind-dot").on("click",(function(e){const t=parseInt(e.target.dataset.index);currentBlindState[t]?e.target.style.backgroundColor="":e.target.style.backgroundColor="black",currentBlindState[t]^=1;let o=0;for(let e=0;e<6;e++)o+=currentBlindState[e]*(1<<e);braille[o]?$("#blind-letter").text(braille[o]):$("#blind-letter").text("Unknown")}));const confirmBlind=()=>{$("#history-blind-area").append($("#demo-blind-letter").clone())},confirmFlag=()=>{$("#history-flag-area").append($("#demo-flag").clone())},flagState=[0,1],flagMap=[];flagMap[51]="a",flagMap[33]="b",flagMap[6]="c",flagMap[15]="d",flagMap[24]="e",flagMap[42]="f",flagMap[61]="g",flagMap[32]="h",flagMap[5]="i",flagMap[13]="j",flagMap[14]="k",flagMap[23]="l",flagMap[41]="m",flagMap[52]="n",flagMap[3]="o",flagMap[12]="p",flagMap[21]="q",flagMap[31]="r",flagMap[34]="s",flagMap[1]="t",flagMap[2]="u",flagMap[16]="v",flagMap[22]="w",flagMap[25]="x",flagMap[4]="y",flagMap[43]="z",$(".flag-shape").on("click",(function(e){const t=parseInt(e.target.dataset.index);if(flagState[0]===t||flagState[1]===t)return;e.target.style.opacity=1,$(`.flag-shape[data-index=${flagState[0]}]`)[0].style.opacity=.1,flagState[0]=flagState[1],flagState[1]=t;const o=9*Math.min(flagState[0],flagState[1])+Math.max(flagState[0],flagState[1]);console.info(o),flagMap[o]?$("#flag-letter").text(flagMap[o]):$("#flag-letter").text("Unknown")}));const caeser=(e,t)=>{let o="";for(let a of e){let e;a.charCodeAt()>=65&&a.charCodeAt()<=90?e=65:a.charCodeAt()>=97&&a.charCodeAt()<=122?e=97:o+=a,o+=String.fromCharCode((a.charCodeAt()-e+t)%26+e)}return o},caeserProcess=()=>{const e=$("#cipher-code-textarea").val();$("#plain-code-area").empty();for(let t=1;t<=25;t++){const o=caeser(e,t);$("#plain-code-area").append(`<div style="display:flex;"><div>凯撒${t}： </div><div>${o}</div></div>`)}},substitutionTable=[["q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","z","x","c","v","b","n","m"],["k","x","v","m","c","n","o","p","h","q","r","s","z","y","i","j","a","d","l","e","g","w","b","u","f","t"],["z","y","x","w","v","u","t","s","r","q","p","o","n","m","l","k","j","i","h","g","f","e","d","c","b","a"]],makeMap=e=>{const t={};for(let o=0;o<26;o++)t[String.fromCharCode(o+97)]=e[o];return t};$("#caeser-brute-force").on("click",(function(e){caeserProcess()}));const useMethod=e=>{$("#substitute-table").empty();for(let t=0;t<26;t++){const o=String.fromCharCode(97+t);$("#substitute-table").append(`<div class="map-unit"><div>${o}</div><input id="cipher-text" data-pt="${o}" value="${substitutionTable[e][t]}"/></div>`)}},changeSubstitutionMethod=()=>{const e=$("#substitution-cipher-method")[0].selectedIndex;useMethod(e)},onTypePlainCode=e=>{if(!$("#autoDecode").get(0).checked)return;caeserProcess();let t=substituteCipher($("#cipher-code-textarea").val(),makeMap(substitutionTable[0]));$("#plain-code-area").append(`<div style="display:flex;"><div>QWE加密： </div><div>${t}</div></div>`),t=substituteCipher($("#cipher-code-textarea").val(),makeMap(substitutionTable[1])),$("#plain-code-area").append(`<div style="display:flex;"><div>QWE解密： </div><div>${t}</div></div>`),t=substituteCipher($("#cipher-code-textarea").val(),makeMap(substitutionTable[2])),$("#plain-code-area").append(`<div style="display:flex;"><div>Atbash： </div><div>${t}</div></div>`)};$("#substitution-cipher-method").ready(()=>{useMethod(0)});const substituteCipher=(e,t)=>{let o=t;t||(o=$.map($(".map-unit #cipher-text"),(e,t)=>{const o={};return o[e.dataset.pt]=e.value,o}).reduce((e,t)=>Object.assign(e,t)));let a="";for(let t of e)o[t]?a+=o[t]:o[toLowerCase(t)]?a+=o[toLowerCase(t)]:a+=t;return a},solveGeneralSubstitution=()=>{const e=$("#cipher-code-textarea").val();$("#plain-code-area").empty();const t=substituteCipher(e);$("#plain-code-area").append(`<div style="display:flex;"><div>结果: </div><div>${t}</div></div>`)},autoCheckClick=e=>{$("#autoDecode").get(0).checked?($("#cipher-code-textarea")[0].style.borderColor="red",caeserProcess(),substituteCipher($("#cipher-code-textarea").val(),makeMap(substitutionTable[0]))):$("#cipher-code-textarea")[0].style.borderColor=""};let dropQuotesColumnArea=[],dropQuotesrowArea=[];const dropQuotesSolve=()=>{const e=$("#blackbox-seprete").get(0).checked;let t=parseInt($("#drop-quotes-column").val()),o=parseInt($("#drop-quotes-row").val());const a=[];for(let e=0;e<o;e++){const o=[];for(let a=0;a<t;a++)"white"===$(`#dq-cell-${e}-${a}`)[0].style.backgroundColor?o.push(!0):o.push(!1);a.push(o)}$("#drop-quote-answer").empty();const r=new Solver.DropQuote(a,dropQuotesColumnArea,t,o).calculate(e=>{$("#drop-quote-answer").append(`<div>${e}</div>`)},e);console.info(r)},dropQuotesChangeInput=e=>{const t=e.target.innerText;if(e.data&&t){const o=e.target.dataset;console.info(o);const a=parseInt(o.idx),r=parseInt(o.col);parseInt(o.row);"col"===o.type&&a===dropQuotesColumnArea[r].length?(dropQuotesColumnArea[r].push(t),console.info(dropQuotesColumnArea),$("#dq-col-"+o.col).prepend(`<div id="dq-col-cell-${o.col}-${a+1}" data-type="col" data-col=${o.col} data-idx=${a+1} contenteditable="true" oninput="dropQuotesChangeInput(event)" class="col-input">0</div>`)):dropQuotesColumnArea[r][a]=t}},dropQuoteModifiedCb=()=>{let e=parseInt($("#drop-quotes-column").val()),t=parseInt($("#drop-quotes-row").val());dropQuotesColumnArea=[];for(let t=0;t<e;t++)dropQuotesColumnArea.push([]);for(let e=0;e<t;e++)dropQuotesrowArea.push([]);$("#drop-quotes-upper-bar").empty(),$("#dq-board").empty();for(let t=0;t<e;t++)$("#drop-quotes-upper-bar").append(`<div id="dq-col-${t}" class="col-container"></div>`),$("#drop-quotes-upper-bar #dq-col-"+t).append(`<div id="dq-col-cell-${t}-0" data-type="col" data-col=${t} data-idx=0 contenteditable="true" oninput="dropQuotesChangeInput(event)" class="col-input">0</div>`);for(let o=0;o<t;o++){$("#dq-board").append(`<div id="row-${o}" class="row-board"></div>`);for(let t=0;t<e;t++)$("#dq-board #row-"+o).append(`<div id="dq-cell-${o}-${t}" class="cell" style="background: white"></div>`)}$("#dq-board .cell").on("click",(function(e){console.info(e.target),"white"===e.target.style.backgroundColor?e.target.style.backgroundColor="black":e.target.style.backgroundColor="white"}))};dropQuoteModifiedCb();let n=parseInt($("#sudoku-row").html()),m=parseInt($("#sudoku-col").html());const generate=(e,t)=>{$("#sudokuContainer").html(""),$("#sudokuContainer").width(30*t+t),$("#sudokuContainer").height(30*e+e);for(let o=0;o<e*t;o++)$("#sudokuContainer").append(`<div class="sudoku-grid"><div class="sudoku-index">${o+1}</div><div id="grid-${o}" class="sudoku-grid-content" contenteditable="true"></div></div>`);$(".sudoku-grid-content,#sudoku-row,#sudoku-col").on("focus",(function(){before=$(this).html()})).on("blur keyup paste",(function(){before!=$(this).html()&&(before=$(this).html(),$(this).trigger("change"))})),$("#sudoku-col,#sudoku-row").on("change",o=>{e=parseInt($("#sudoku-row").html()),t=parseInt($("#sudoku-col").html()),generate(e,t)}),$(".sudoku-grid-content").on("change",e=>{console.info(e.target.innerText);const t=e.target.innerText,o=parseInt(e.currentTarget.id.substr(5))+1;console.info(o);const a=$("#replaceStr").val().replace("<格子序号>",o.toString()),r="^"+a.replace("<格子内容>",".*")+"$",l=$("#rules").val().split("\n");let n="";for(let e=0;e<l.length;e++)rulesWithoutSpace=l[e].replace(/\s/g,""),""!==rulesWithoutSpace&&(new RegExp(r.replace("[","\\[").replace("]","\\]")).test(rulesWithoutSpace)||(n+=rulesWithoutSpace+"\n"));""!=t&&(n+=a.replace("<格子内容>",t)+"\n"),$("#rules").val(n)})},initSudoku=()=>{let e="每一格是从1到9的数字\n每一行互不相同\n每一列互不相同\n第[1,2,3,10,11,12,19,20,21]格互不相同\n第[4,5,6,13,14,15,22,23,24]格互不相同\n第[7,8,9,16,17,18,25,26,27]格互不相同\n";e+="第[28,29,30,37,38,39,46,47,48]格互不相同\n第[31,32,33,40,41,42,49,50,51]格互不相同\n第[34,35,36,43,44,45,52,53,54]格互不相同\n",e+="第[55,56,57,64,65,66,73,74,75]格互不相同\n第[58,59,60,67,68,69,76,77,78]格互不相同\n第[61,62,63,70,71,72,79,80,81]格互不相同\n第1格大于5\n",$("#replaceStr").val("第<格子序号>格是<格子内容>"),n=9,m=9,$("#rules").val("每一格是从1到9的数字\n每一行互不相同\n每一列互不相同\n第[1,2,3,10,11,12,19,20,21]格互不相同\n第[4,5,6,13,14,15,22,23,24]格互不相同\n第[7,8,9,16,17,18,25,26,27]格互不相同\n第[28,29,30,37,38,39,46,47,48]格互不相同\n第[31,32,33,40,41,42,49,50,51]格互不相同\n第[34,35,36,43,44,45,52,53,54]格互不相同\n第[55,56,57,64,65,66,73,74,75]格互不相同\n第[58,59,60,67,68,69,76,77,78]格互不相同\n第[61,62,63,70,71,72,79,80,81]格互不相同\n第1格大于5\n"),$("#sudoku-row").html(n),$("#sudoku-col").html(m),generate(n,m)},changeSolverMode=()=>{const e=$("#solverMode").val();if("sudoku"===e)initSudoku();else if("mine"===e)$("#replaceStr").val("第<格子序号>格的[本格,上,下,左,右,左上,右上,左下,右下]的黑格的数量是<格子内容>"),$("#rules").val("每一格是白格或黑格"),generate(n,m);else if("magicSquare"===e){let e="每一格是从1到16的数字\n每一格互不相同\n每一列的和是34\n每一行的和是34\n";$("#rules").val(e),n=4,m=4,$("#sudoku-row").html(n),$("#sudoku-col").html(m),$("#replaceStr").val("第<格子序号>格是<格子内容>"),generate(n,m)}};$("#solveSudoku").click(()=>{n=parseInt($("#sudoku-row").html()),m=parseInt($("#sudoku-col").html()),new Solver.SudokuSolver($("#rules").val().split("\n"),n,m)}),initSudoku()</script>

		
	</body>
</html>
